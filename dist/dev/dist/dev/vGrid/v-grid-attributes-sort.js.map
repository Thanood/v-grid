{"version":3,"sources":["vGrid/v-grid-attributes-sort.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAKQ,Y,qBAAA,M;AAAQ,qB,qBAAA,e;;AACR,W,UAAA,K;;;qCAKK,mB,WAFZ,gBAAgB,QAAhB,C,UACA,OAAO,OAAP,EAAgB,KAAhB,C;AAIC,qCAAY,OAAZ,EAAqB,KAArB,EAA4B;AAAA;;AAC1B,eAAK,KAAL,GAAa,KAAb;AACA,eAAK,OAAL,GAAe,OAAf;AACD;;sCAID,I,iBAAK,c,EAAgB,e,EAAiB;AACpC,eAAK,cAAL,GAAsB,cAAtB;AACA,eAAK,eAAL,GAAuB,eAAvB;;AAGA,cAAI,SAAS,KAAK,KAAL,CAAW,KAAX,CAAiB,GAAjB,CAAb;AACA,eAAK,SAAL,GAAiB,OAAO,CAAP,CAAjB;AAED,S;;sCAGD,Q,uBAAW;AAAA;;AACT,eAAK,QAAL,GAAgB,SAAS,aAAT,CAAuB,MAAvB,CAAhB;AACA,eAAK,QAAL,CAAc,SAAd,GAA0B,KAAK,iBAAL,CAAuB,KAAK,SAA5B,CAA1B;AACA,eAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,QAA9B;AACA,eAAK,OAAL,CAAa,OAAb,GAAuB,UAAC,CAAD,EAAM;AAC3B,kBAAK,KAAL,CAAW,WAAX,CAAuB,SAAvB,CAAiC,MAAK,SAAtC,EAAiD,EAAE,QAAnD;AACD,WAFD;;AAIA,eAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,gBAApC,EAAsD,YAAK;AACzD,kBAAK,QAAL,CAAc,SAAd,GAA0B,MAAK,iBAAL,CAAuB,MAAK,SAA5B,CAA1B;AACD,WAFD;AAGD,S;;sCAGD,iB,8BAAkB,S,EAAW;AAAA;;AAC3B,cAAI,MAAM,KAAK,KAAL,CAAW,WAAX,CAAuB,GAAjC;;AAEA,cAAI,4BAA0B,IAAI,QAA9B,SAA0C,IAAI,YAA9C,cAAJ;AACA,cAAI,+BAA6B,IAAI,QAAjC,SAA6C,IAAI,WAAjD,cAAJ;AACA,cAAI,gCAA8B,IAAI,QAAlC,SAA8C,IAAI,YAAlD,cAAJ;;AAGA,eAAK,KAAL,CAAW,SAAX,CAAqB,SAArB,GAAiC,OAAjC,CAAyC,UAAC,CAAD,EAAO;AAC9C,gBAAI,EAAE,SAAF,KAAgB,OAAK,SAAzB,EAAoC;AAClC,kBAAI,QAAQ,EAAE,GAAF,KAAU,IAAV,GAAiB,SAAjB,GAA6B,UAAzC;AACA,kBAAI,2BAAyB,IAAI,UAA7B,0BAA4D,EAAE,EAA9D,cAAJ;AACA,uBAAS,OAAO,KAAhB;AACD;AACF,WAND;;AAQA,iBAAO,MAAP;AACD,S","file":"vGrid/v-grid-attributes-sort.js","sourceRoot":"/source/","sourcesContent":["/*****************************************************************************************************************\n *    Attributes for header, enables sorting\n *    Created by vegar ringdal\n *\n ****************************************************************************************************************/\nimport {inject, customAttribute} from 'aurelia-framework';\nimport {VGrid} from './v-grid';\n\n\n@customAttribute('v-sort')\n@inject(Element, VGrid)\nexport class vGridAttributesSort {\n\n\n  constructor(element, vGrid) {\n    this.vGrid = vGrid;\n    this.element = element;\n  }\n\n\n\n  bind(bindingContext, overrideContext) {\n    this.bindingContext = bindingContext;\n    this.overrideContext = overrideContext;\n\n    //get values\n    let values = this.value.split(\"|\");\n    this.attribute = values[0];\n\n  }\n\n\n  attached() {\n    this.sortIcon = document.createElement(\"SPAN\");\n    this.sortIcon.innerHTML = this.getSortIconMarkup(this.attribute);\n    this.element.appendChild(this.sortIcon);\n    this.element.onclick = (e)=> {\n      this.vGrid.vGridConfig.onOrderBy(this.attribute, e.shiftKey);\n    };\n\n    this.vGrid.element.addEventListener(\"sortIconUpdate\", ()=> {\n      this.sortIcon.innerHTML = this.getSortIconMarkup(this.attribute);\n    });\n  }\n\n\n  getSortIconMarkup(attribute) {\n    var css = this.vGrid.vGridConfig.css;\n\n    var markup = `<span  class=\"${css.sortIcon} ${css.sortIconSort}\"></span>`;\n    var isAscHtml = `<span  class=\"${css.sortIcon} ${css.sortIconAsc}\"></span>`;\n    var isDescHtml = `<span  class=\"${css.sortIcon} ${css.sortIconDesc}\"></span>`;\n\n\n    this.vGrid.vGridSort.getFilter().forEach((x) => {\n      if (x.attribute === this.attribute) {\n        var block = x.asc === true ? isAscHtml : isDescHtml;\n        var main = `<span $ class=\"${css.sortIconNo}\" data-vgridsort=\"${x.no}\"></span>`;\n        markup = main + block;\n      }\n    });\n\n    return markup;\n  }\n\n\n}\n"]}